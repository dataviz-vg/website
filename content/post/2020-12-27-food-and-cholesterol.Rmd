---
title: "Food and Cholesterol"
author: "Colin Fay"
date: 2020-12-20
slug: "food-and-cholesterol"
categories: ["health"]
tags: ["food", "nutrition"]
draft: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  collapse = TRUE, 
  echo = FALSE, 
  warning = FALSE, 
  message = FALSE
)
library(dplyr)
library(ggplot2)
library(ggridges)
library(vegviz)
table <- "food-and-cholesterol.csv"
if (!file.exists(
  table
)){
  fls <- tempfile(fileext = ".xls")
  download.file(
    "https://ciqual.anses.fr/cms/sites/default/files/inline-files/Table%20Ciqual%202020_ENG_2020%2007%2007.xls", 
    fls
  )
  readxl::read_excel(fls) %>%
    mutate(`Cholesterol (mg/100g)` = as.numeric(`Cholesterol (mg/100g)`)) %>%
    #filter(`Cholesterol (mg/100g)` != 100) %>%
    #top_n(30, `Cholesterol (mg/100g)`) %>%
    # count(alim_grp_nom_eng)
    #select(`Fat (g/100g)`)
    arrange(desc(`Cholesterol (mg/100g)`)) %>%
    select(alim_nom_eng, `Cholesterol (mg/100g)`, alim_grp_nom_eng) %>%
    write.csv(table, row.names = FALSE)
  unlink(fls)
}
source_table <- read.csv(table, stringsAsFactors = FALSE)

```

### `r emo::ji("mag_right")` About the source 

::: {.source}
French Agency for Food, Environmental and Occupational Health & Safety. ANSES-CIQUAL French food composition table version 2020.
::: 

::: {.link}
[ciqual.anses.fr](https://ciqual.anses.fr)
:::

::: {.quote}
>  Individuals should eat as little dietary cholesterol as possible while consuming a healthy eating pattern. In general, foods that are higher in dietary cholesterol, such as fatty meats and high-fat dairy products, are also higher in saturated fats. 
> -- [Dietary Guidelines for Americans](https://health.gov/sites/default/files/2019-09/2015-2020_Dietary_Guidelines.pdf)
:::

::: {.count}
> ANSES-CIQUAL compiles different data sources to prepare the food composition table. This online version of the table provides the list of data sources which were used to produce the values for each pair food â€“ component. ANSES-CIQUAL launches every year a plan to sample and analyse 60 to 80 foods, in collaboration with a subcontractor laboratory. However, this is not sufficient to update all composition data in the table.
:::



### `r emo::ji("chart_with_upwards_trend")` Visualising the data


In total, the database contains 3186 aliments. 

```{r fig.dim = c(12,14)}
source_table %>%
  mutate(`Cholesterol..mg.100g.` = as.numeric(`Cholesterol..mg.100g.`)) %>%
  ggplot(aes(x = `Cholesterol..mg.100g.`, y = alim_grp_nom_eng, fill = alim_grp_nom_eng)) +
  geom_density_ridges() +
  theme_ridges() +
  theme(legend.position = "none")
```

```{r fig.dim = c(12,14)}
source_table %>%
  mutate(`Cholesterol..mg.100g.` = as.numeric(`Cholesterol..mg.100g.`)) %>%
  filter(Cholesterol..mg.100g. > 100) %>%
  ggplot(aes(x = `Cholesterol..mg.100g.`, y = alim_grp_nom_eng, fill = alim_grp_nom_eng)) +
  geom_density_ridges() +
  theme_ridges() +
  theme(legend.position = "none")
```

`r details::details(knitr::kable(source_table, format = "html"), summary = "Show the data",lang  = NULL)`


::: {.code}
Code behind this post is available `r build_link(knitr::current_input())`. 
:::
